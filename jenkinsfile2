pipeline {
  agent any

  stages {
    stage('Backup') {
      steps {
        sh '''
          docker run --rm -v jenkins_data:/volume -v ./:/backup \
          -v /var/run/docker.sock:/var/run/docker.sock alpine \
          sh -c "cd /volume && tar -czf /backup/backup.tar.gz ."
        '''
      }
    }
  }
}